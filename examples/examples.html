<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>SAPO Examples Page</title>
    <script type="text/javascript" src="../build/sapo-debug.js"></script>
  </head>
    <body>
      <canvas id='canvas' width='256' height='256' style='width:256px;height:256px'></canvas>
      <div id='progress-container' style='width:256px;height:5px;background-color:gray;'>
        <div id='progress' style='width:0px;height:5px;background-color:#66cc66;'></div>
      </div>
      <div id='info' style='width:256px;height:15px;background-color:gray;font-family:verdana;font-size:10px;color:#ddd;text-align:center;'></div>
      <a onclick="canvas.stop();return false;" href='#'>STOP</a><br/>
      <hr/>
      <!--
      <a onclick="canvas.render( flat1 );return false;" href='#'>Render Flat1 (should look like 2)</a><br />
      <a onclick="canvas.render( flat2 );return false;" href='#'>Render Flat2 (Green)</a><br />
      <a onclick="canvas.render( flat3 );return false;" href='#'>Render Flat3 (Pink)</a><br />
      <a onclick="canvas.render( checker1 );return false;" href='#'>Render Checker1 (should look like Flat2 and a transparent bg combined)</a><br />
      <a onclick="canvas.render( checker2 );return false;" href='#'>Render Checker2 (uses Checker1 and Flat3)</a><br />
      <a onclick="canvas.render( boxBlur1 );return false;" href='#'>Render BoxBlur1 (blurred Checker1)</a><br />
      <a onclick="canvas.render( boxBlur2 );return false;" href='#'>Render BoxBlur2 (blurred Circle2 SLOOWWW!!)</a><br />
      <a onclick="canvas.render( line1 );return false;" href='#'>Render Line1 (Line Color = Checker1, Bg Color = Flat3)</a><br />
      <a onclick="canvas.render( line2 );return false;" href='#'>Render Line2</a><br />
      <a onclick="canvas.render( pixelate1 );return false;" href='#'>Render Pixelate1 (pixelates Line2)</a><br />
      <a onclick="canvas.render( gradient1 );return false;" href='#'>Render Gradient1 (from yellow to Pixelated1)</a><br />
      <a onclick="canvas.render( gradient2 );return false;" href='#'>Render Gradient2 Horizontal Reversed (with feedback)</a><br />
      <a onclick="canvas.render( square1 );return false;" href='#'>Render Square1 (with feedback)</a><br />
      <a onclick="canvas.render( square2 );return false;" href='#'>Render Square2 (mixing Line2 and Checker2)</a><br />
      <a onclick="canvas.render( circle1 );return false;" href='#'>Render Circle1 (with feedback)</a><br />
      <a onclick="canvas.render( circle2 );return false;" href='#'>Render Circle2 (mixing Square1 and Square2)</a><br />
      <a onclick="canvas.render( circle3 );return false;" href='#'>Render Color2Float1 (using a gradient as input to modify a circle width)</a><br />        
      -->
      <script>
        /* RENDER THE LINKS
         */
        var links = [
              ['flat1', 'Render Flat1']
            ],
            i;
            
        for (i = 0; i < links.length; i++) {
          document.write('<a onclick="canvas.render('+ links[i][0] +'); return false;" href="#">'+ links[i][1] +'</a><br/>');
        }
        
        /* CREATE THE NODES
         */
         
        var flat1 = SAPO.node.Flat();
        /*
            var boxBlur1 = SAPO.node.BoxBlur( {'samples':3, 'radius':0.05} );
            var boxBlur2 = SAPO.node.BoxBlur( {'samples':7, 'radius':0.1} );
        
            var checker1 = SAPO.node.Checker( {'color_1': {r:0.5,g:1,b:0.5,a:0}, 'repeat_x':4, 'repeat_y':4} );
            var checker2 = SAPO.node.Checker( {'repeat_x':3, 'repeat_y':3, 'fuzz': 0.1} );
                    
            var flat1 = SAPO.node.Flat( {'color': { r:1, g:0.23, b:1, a:1 } } );
            var flat2 = SAPO.node.Flat( {'color': { r:0.5, g:1, b:0.5, a:1 } } );
            var flat3 = SAPO.node.Flat( {'color': { r:1, g:0.23, b:1, a:0.5 } } );

            var line1 = SAPO.node.Line( {'start': {x:0.1,y:0.3}, 'end': {x:0.8,y:0.5}, 'width': 0.15, 'fuzz': 0.2} );
            var line2 = SAPO.node.Line( {'start': {x:0.4,y:0.3}, 'end': {x:0.8,y:0.8}, 'width': 0.05, 'fuzz': 0.01} );

            var pixelate1 = SAPO.node.Pixelate( {'repeat_x': 20, 'repeat_y': 20} );

            var gradient1 = SAPO.node.Gradient( {'start': {x:0.2,y:0.2}, 'end': {x:0.5,y:0.5}, 'color_1': {r:1,g:1,b:0,a:1} } );
            var gradient2 = SAPO.node.Gradient( {'start': {x:0.9,y:0.5}, 'end': {x:0.1,y:0.5} } );
            var gradient3 = SAPO.node.Gradient( {'start': {x:0.2,y:0.8}, 'end': {x:1,y:0} } );

            var square1 = SAPO.node.Square( {'center': {x:0.5,y:0.5}, 'direction': {x:0.2,y:0.8} });
            var square2 = SAPO.node.Square( {'center': {x:0.8,y:0.8}, 'direction': {x:0.5,y:0.25}, 'fuzz':0.2, 'width': 0.7});

            var circle1 = SAPO.node.Circle( {'center': {x:0.5,y:0.5}, 'direction': {x:0.2,y:0.8}, 'fuzz':0.05});
            var circle2 = SAPO.node.Circle( {'center': {x:0.2,y:0.4}, 'direction': {x:0.7,y:0.15}, 'fuzz':0.8, 'width': 0.4});
            var circle3 = SAPO.node.Circle( {'center': {x:0.4,y:0.45}, 'direction': {x:0.2,y:0.8}, 'fuzz':0.1});

            var color2float1 = SAPO.node.Color2Float( {'min': 0,'max':2});
            var color2float2 = SAPO.node.Color2Float( {'min': 0,'max':0.3});            

            boxBlur1.getPort('input').connect( checker1 );
            boxBlur2.getPort('input').connect( circle2 );
            
            checker1.getPort('color_2').connect( flat2 );
            checker2.getPort('color_1').connect( checker1 );
            checker2.getPort('color_2').connect( flat3 );
            
            flat1.getPort('color').connect( flat2 );

            line1.getPort('fill_color').connect( checker1 );
            line1.getPort('bg_color').connect( flat3 );
            
            pixelate1.getPort('input').connect( line2 );

            gradient1.getPort('color_2').connect( pixelate1 );
            gradient2.showFeedback( true );

            square1.showFeedback( true );
            square2.getPort('fill_color').connect( line2 );
            square2.getPort('bg_color').connect( checker2 );

            circle1.showFeedback( true );
            circle2.getPort('fill_color').connect( square1 );
            circle2.getPort('bg_color').connect( square2 );

            color2float1.getPort('input').connect( gradient3 );
            circle3.getPort('width').connect( color2float1 );
            
            var canvas = SAPO.output.Canvas( document.getElementById("canvas") );
            
            canvas.setProgressCallback( function( data )
            {
                var progress = document.getElementById('progress'),
                    info     = document.getElementById('info'),
                    remaining;

                if( data.status = 'computing' )
                {
                    progress.style.width = data.progress * 256 + 'px';
    
                    remaining = ( data.elapsed / data.progress ) - data.elapsed;
                    info.innerHTML = '<b>Elapsed:</b> ' + ( data.elapsed / 1000 ).toFixed(2) + "' <b>Remaining:</b> " + ( remaining / 1000 ).toFixed( 2 ) + "'";
                }
                else if( data.status = 'preparing' )
                {
                    info.innterHTML = '<b>Preparing...</b>';
                }    
            });

            canvas.setSampling( 1 );
            */
    </script>
  </body>
</html>