function SapoRenderer(a){this.ctx=a.getContext("2d"),this.width=a.width,this.height=a.width}SapoRenderer.prototype._getWorker=function(a){var b=["var x, y, s, t, color, pos;","var tile = arguments[0];","var fragment = "+a.toString()+";","for (x = 0; x < tile.tileW; x++) {","    for (y = 0; y < tile.tileH; y++) {","        s = ((tile.tileW * tile.x) + x) / tile.width;","        t = ((tile.tileH * tile.y) + y) / tile.height;","        color = fragment(s, t);","        pos = ((y * tile.tileW) + x) * 4;","        tile.imgData.data[pos]     = color[0] * 255; // R","        tile.imgData.data[pos + 1] = color[1] * 255; // G","        tile.imgData.data[pos + 2] = color[2] * 255; // B","        tile.imgData.data[pos + 3] = color[3] * 255; // A","    }","}","return tile;"];return console.log(Function(b.join("\n")).toString()),cw({render:Function(b.join("\n"))},4)},SapoRenderer.prototype.render=function(a){var b,c,d=this,e=[],f=4,g=4,h=d.width/f,i=d.height/g,j=this._getWorker(a);for(b=0;f>b;b++)for(c=0;g>c;c++)e.push({x:b,y:c,imgData:d.ctx.getImageData(b*h,c*i,h,i),tileW:h,tileH:i,width:d.width,height:d.height});j.batch(function(a){d.ctx.putImageData(a.imgData,a.x*a.tileW,a.y*a.tileH)}).render(e)},$(function(){function a(){var a=b.getValue(),d=/render\(([^)]+)\)/.exec(a)[1];console.log(d),console.log(a.replace("function render","return function render")),c.render(Function(a.replace("function render","return function"))())}var b=ace.edit("editor");b.setTheme("ace/theme/solarized_light"),b.getSession().setMode("ace/mode/javascript"),b.setFontSize(14),b.setShowPrintMargin(!1),b.setShowFoldWidgets(!1);var c=new SapoRenderer(document.getElementById("canvas"));params={color:[1,1,1,1],point:[.5,.5],"float":.3,"int":10,bool:!0},$("#presets").change(function(){confirm("Loading the preset will erase your current session. Continue?")&&(b.setValue($('[data-preset-id="'+this.value+'"]').html()),b.clearSelection()),""!==this.value&&(this.value="")}),b.on("change",_.debounce(a,250)),a()});